{#
 # Licensed under the Apache License, Version 2.0 (the "License");
 # you may not use this file except in compliance with the License.
 # You may obtain a copy of the License at
 #
 # http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
-#}
{% extends "manage_organization_base.html" %}

{% set active_tab = 'people' %}

{% block title %}{% trans organization_name=organization.name %}Manage people in '{{ organization_name }}'{% endtrans %}{% endblock %}

{% macro two_factor_badge(user) -%}
  {% if user.has_two_factor %}
  <span class="badge badge--success" title="{% trans %}2FA enabled{% endtrans %}">
    {% trans %}2FA{% endtrans %}
    <i class="fa fa-check" aria-hidden="true"></i>
  </span>
  {% else %}
  <span class="badge badge--danger" title="{% trans %}2FA disabled{% endtrans %}">
    {% trans %}2FA{% endtrans %}
    <i class="fa fa-times" aria-hidden="true"></i>
  </span>
  {% endif %}
{% endmacro %}

{% block main %}
  <h2>{% trans %}People{% endtrans %}</h2>
  <p>{% trans organization_name=organization.name %}Use this page to control which PyPI users can help you to manage {{ organization_name }}.{% endtrans %}</p>
  <div class="callout-block" data-controller="dismissable" data-dismissable-identifier="roles">
    <button type="button" title="{% trans %}Dismiss{% endtrans %}" data-action="click->dismissable#dismiss" class="callout-block__dismiss" aria-label="{% trans %}Close{% endtrans %}"><i class="fa fa-times" aria-hidden="true"></i></button>
    <p>{% trans number_of_roles=3 %}There are {{ number_of_roles }} possible roles for people in this organization:{% endtrans %}</p>
    <dl>
      <dt>{% trans %}Member{% endtrans %}</dt>
      <dd>{% trans %}Can be owner or maintainer for specific projects. Cannot create new projects. Cannot create or manage teams. Cannot invite or manage organization members. Cannot delete projects or the organization itself.{% endtrans %}</dd>
      <dt>{% trans %}Manager{% endtrans %}</dt>
      <dd>{% trans %}Can be owner or maintainer for specific projects. Can create new projects. Can create and manage teams. Cannot invite or manage organization members. Cannot delete projects or the organization itself.{% endtrans %}</dd>
      <dt>{% trans %}Owner{% endtrans %}</dt>
      <dd>{% trans %}Can be owner or maintainer for specific projects. Can create new projects. Can create and manage teams. Can invite and manage organization members. Can delete projects and the organization itself.{% endtrans %}</dd>
    </dl>
  </div>

  <h3>{% trans %}Invite member{% endtrans %}</h3>
  <form method="POST">
    <div class="form-group">
      <input name="csrf_token" type="hidden" value="{{ request.session.get_csrf_token() }}">
      <label for="username" class="form-group__label">
        {% trans %}User{% endtrans %}
        {% if form.username.flags.required %}
        <span class="form-group__required">{% trans %}(required){% endtrans %}</span>
        {% endif %}
      </label>
      {{ form.username(placeholder=gettext("Username"), autocomplete="off", autocapitalize="off", spellcheck="false", class_="form-group__field", **{"aria-describedby":"user-errors"}) }}
      <div id="user-errors">
        {{ field_errors(form.username) }}
      </div>
    </div>
    <div class="form-group">
      <label for="role_name" class="form-group__label">
        {% trans %}Role{% endtrans %}
        {% if form.role_name.flags.required %}
        <span class="form-group__required">{% trans %}(required){% endtrans %}</span>
        {% endif %}
      </label>
      {{ form.role_name(class_="form-group__field", autocomplete="off", **{"aria-describedby":"role-errors"}) }}
      <div id="role-errors">
        {{ field_errors(form.role_name) }}
      </div>
    </div>
    <div>
      <input type="submit" value="{% trans %}Invite{% endtrans %}" class="button button--primary">
    </div>
  </form>
  <br>
{% endblock %}
